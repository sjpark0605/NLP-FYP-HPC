preheat oven to 425 degrees. cook pasta according to package directions , drain and set aside. steam broccoli until fork tender. chop into small pieces. heat oil in a small skillet. add onions and cook until soft , but now brown. melt butter in a medium saucepan over medium heat. add flour and cook 1 minute. add broth and whisk constantly until mixture is smooth of lumps and thickened. whisk in milk. remove from heat. add onions , thyme , parsley , salt , and pepper. in a large bowl , combine cooked pasta , ham , broccoli , and sauce. transfer to a casserole dish sprayed with cooking spray. melt butter in a small bowl. add breadcrumbs and cheese to melted butter. top with breadcrumb cheese mixture. bake for 12 minutes until sauce is bubbly.